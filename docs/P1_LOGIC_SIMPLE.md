# Логика П1 простыми словами

## Что такое П1?

**П1** = **Первая команда выигрывает матч**

Например:
- Матч: Манчестер Юнайтед vs Ливерпуль
- Результат: 2:1
- П1 выигрывает ✓ (Манчестер забил больше)

---

## Как это работает в системе?

### Шаг 1: Матч закончился

```
Матч: Манчестер (хозяева) 2 : 1 Ливерпуль (гости)

Система вычисляет:
├─ homeScore = 2 (Манчестер)
├─ awayScore = 1 (Ливерпуль)
└─ Кто выиграл?
   ├─ Если homeScore > awayScore → outcome = 1 (П1)
   ├─ Если homeScore = awayScore → outcome = 0 (Х)
   └─ Если homeScore < awayScore → outcome = 2 (П2)
```

### Шаг 2: Система присваивает код исхода

```
outcome = 1  ← это код для П1 (первая команда выигрывает)
outcome = 0  ← это код для Х (ничья)
outcome = 2  ← это код для П2 (вторая команда выигрывает)
```

### Шаг 3: Проверка прогноза

```
Пользователь сделал прогноз: П1

Система проверяет:
├─ Какой код у прогноза? → 1 (П1)
├─ Какой код у реального исхода? → 1 (П1)
└─ Они совпадают? → ДА! ✓ Прогноз выигрывает!
```

---

## Как это связано с админкой?

### В админке мы говорим системе:

```
"Создай исход П1"

Система спрашивает:
├─ Как его назвать? → "П1"
├─ Какой оператор? → "Равно (=)"
└─ Какой код? → "1"

Система запоминает:
├─ Название: П1
├─ Оператор: = (равно)
└─ Код: 1
```

### Когда матч закончился:

```
Система проверяет все прогнозы:

Прогноз 1: П1 (код = 1)
├─ Реальный исход: outcome = 1
├─ Проверка: 1 = 1? → ДА ✓
└─ Результат: ВЫИГРЫШ

Прогноз 2: Х (код = 0)
├─ Реальный исход: outcome = 1
├─ Проверка: 0 = 1? → НЕТ ✗
└─ Результат: ПРОИГРЫШ

Прогноз 3: П2 (код = 2)
├─ Реальный исход: outcome = 1
├─ Проверка: 2 = 1? → НЕТ ✗
└─ Результат: ПРОИГРЫШ
```

---

## Три кода для трёх исходов

```
┌─────────────────────────────────────────────────────┐
│ КОД 1 = П1 (первая команда выигрывает)             │
│ ├─ Пример: 2:1, 3:0, 1:0                           │
│ └─ Условие: homeScore > awayScore                  │
│                                                     │
│ КОД 0 = Х (ничья)                                  │
│ ├─ Пример: 1:1, 2:2, 0:0                           │
│ └─ Условие: homeScore = awayScore                  │
│                                                     │
│ КОД 2 = П2 (вторая команда выигрывает)             │
│ ├─ Пример: 0:1, 1:3, 0:2                           │
│ └─ Условие: homeScore < awayScore                  │
└─────────────────────────────────────────────────────┘
```

---

## Почему нужны эти три поля в админке?

### Поле 1: Название (name)

```
Зачем: Чтобы администратор видел, что это за исход
Значение: "П1"
Пример: В списке исходов видим "П1", "Х", "П2"
```

### Поле 2: Оператор (comparisonOperator)

```
Зачем: Чтобы система знала, как сравнивать
Значение: "Равно (=)"
Логика: outcome = 1 (проверяем РАВЕНСТВО)

Другие операторы для других типов:
├─ "Больше (>)" → для тоталов (ТБ 2.5)
├─ "Меньше (<)" → для тоталов (ТМ 2.5)
└─ "Равно (=)" → только для исходов матча
```

### Поле 3: Значение исхода (outcomeValue)

```
Зачем: Чтобы система знала, какой код искать
Значение: 1
Логика: Ищем outcome = 1 (это П1)

Для других исходов:
├─ Х → outcomeValue = 0
└─ П2 → outcomeValue = 2
```

---

## Полная цепочка для П1

```
1️⃣ АДМИНКА (создание)
   ├─ name = "П1"
   ├─ comparisonOperator = "Равно (=)"
   └─ outcomeValue = 1

2️⃣ ПОЛЬЗОВАТЕЛЬ (прогноз)
   └─ Выбирает: "П1"

3️⃣ МАТЧ (результат)
   ├─ Манчестер 2 : 1 Ливерпуль
   └─ Система вычисляет: outcome = 1

4️⃣ ПРОВЕРКА (система)
   ├─ Прогноз: П1 (код 1)
   ├─ Реальность: outcome = 1
   ├─ Сравнение: 1 = 1?
   └─ Результат: ✓ ВЫИГРЫШ!
```

---

## Аналогия с жизнью

```
Представьте, что вы играете в угадайку:

АДМИНКА (правила игры):
├─ "Если я скажу П1, это значит код 1"
├─ "Если я скажу Х, это значит код 0"
└─ "Если я скажу П2, это значит код 2"

ПОЛЬЗОВАТЕЛЬ (ставка):
└─ "Я ставлю на П1!"

МАТЧ (результат):
└─ "Первая команда выигрывает!"

ПРОВЕРКА (угадал ли?):
├─ Ставка: П1 (код 1)
├─ Результат: П1 (код 1)
└─ Совпадает? ДА! Выигрыш!
```

---

## Почему именно коды 1, 0, 2?

```
Это стандартная система в спорте:

1 = Победа первой команды (Home win)
0 = Ничья (Draw)
2 = Победа второй команды (Away win)

Почему не 1, 2, 3?
├─ Потому что 0 = ничья (это логично)
├─ 1 = первая (это логично)
└─ 2 = вторая (это логично)

Почему не буквы (П1, Х, П2)?
├─ Потому что коды быстрее обрабатывать
├─ Коды занимают меньше памяти
└─ Коды универсальны для всех языков
```

---

## Все типы прогнозов с примерами

### 1️⃣ ОСНОВНЫЕ ИСХОДЫ (П1, Х, П2)

```
Матч: Манчестер 2 : 1 Ливерпуль

П1 (Победа первой команды)
├─ Условие: homeScore > awayScore
├─ Пример: 2 > 1 ✓
├─ Админка: outcomeValue = 1
└─ Результат: ВЫИГРЫШ

Х (Ничья)
├─ Условие: homeScore = awayScore
├─ Пример: 2 = 1 ✗
├─ Админка: outcomeValue = 0
└─ Результат: ПРОИГРЫШ

П2 (Победа второй команды)
├─ Условие: homeScore < awayScore
├─ Пример: 2 < 1 ✗
├─ Админка: outcomeValue = 2
└─ Результат: ПРОИГРЫШ
```

---

### 2️⃣ ОБЩИЕ ТОТАЛЫ (ТБ, ТМ)

```
Матч: Манчестер 2 : 1 Ливерпуль
Всего голов: 2 + 1 = 3

ТБ 2.5 (Тотал больше 2.5)
├─ Условие: homeScore + awayScore > 2.5
├─ Пример: 3 > 2.5 ✓
├─ Админка:
│  ├─ scope = "both" (обе команды)
│  ├─ aggregation = "sum" (сумма)
│  ├─ comparisonOperator = "Больше (>)"
│  └─ value = 2.5
└─ Результат: ВЫИГРЫШ

ТМ 2.5 (Тотал меньше 2.5)
├─ Условие: homeScore + awayScore < 2.5
├─ Пример: 3 < 2.5 ✗
├─ Админка:
│  ├─ scope = "both"
│  ├─ aggregation = "sum"
│  ├─ comparisonOperator = "Меньше (<)"
│  └─ value = 2.5
└─ Результат: ПРОИГРЫШ
```

---

### 3️⃣ ДВОЙНОЙ ШАНС (1Х, 12, Х2)

```
Матч: Манчестер 2 : 1 Ливерпуль (П1)

1Х (Первая или ничья)
├─ Условие: outcome = 1 ИЛИ outcome = 0
├─ Пример: outcome = 1 ✓
├─ Админка:
│  ├─ comparisonOperator = "Принадлежность множеству (in)"
│  ├─ set = [1, 0]
│  └─ name = "1Х"
└─ Результат: ВЫИГРЫШ (потому что П1)

12 (Первая или вторая)
├─ Условие: outcome = 1 ИЛИ outcome = 2
├─ Пример: outcome = 1 ✓
├─ Админка:
│  ├─ comparisonOperator = "Принадлежность множеству (in)"
│  ├─ set = [1, 2]
│  └─ name = "12"
└─ Результат: ВЫИГРЫШ (потому что П1)

Х2 (Ничья или вторая)
├─ Условие: outcome = 0 ИЛИ outcome = 2
├─ Пример: outcome = 1 ✗
├─ Админка:
│  ├─ comparisonOperator = "Принадлежность множеству (in)"
│  ├─ set = [0, 2]
│  └─ name = "Х2"
└─ Результат: ПРОИГРЫШ
```

---

### 4️⃣ ИНДИВИДУАЛЬНЫЕ ТОТАЛЫ (ИТБ, ИТМ)

```
Матч: Манчестер 2 : 1 Ливерпуль

ИТБ(1) 1.5 (Индивидуальный тотал первой команды больше 1.5)
├─ Условие: homeScore > 1.5
├─ Пример: 2 > 1.5 ✓
├─ Админка:
│  ├─ scope = "home" (только хозяева)
│  ├─ aggregation = "direct" (прямое значение)
│  ├─ comparisonOperator = "Больше (>)"
│  └─ value = 1.5
└─ Результат: ВЫИГРЫШ

ИТБ(2) 0.5 (Индивидуальный тотал второй команды больше 0.5)
├─ Условие: awayScore > 0.5
├─ Пример: 1 > 0.5 ✓
├─ Админка:
│  ├─ scope = "away" (только гости)
│  ├─ aggregation = "direct"
│  ├─ comparisonOperator = "Больше (>)"
│  └─ value = 0.5
└─ Результат: ВЫИГРЫШ

ИТМ(1) 1.5 (Индивидуальный тотал первой команды меньше 1.5)
├─ Условие: homeScore < 1.5
├─ Пример: 2 < 1.5 ✗
├─ Админка:
│  ├─ scope = "home"
│  ├─ aggregation = "direct"
│  ├─ comparisonOperator = "Меньше (<)"
│  └─ value = 1.5
└─ Результат: ПРОИГРЫШ

ИТМ(2) 1.5 (Индивидуальный тотал второй команды меньше 1.5)
├─ Условие: awayScore < 1.5
├─ Пример: 1 < 1.5 ✓
├─ Админка:
│  ├─ scope = "away"
│  ├─ aggregation = "direct"
│  ├─ comparisonOperator = "Меньше (<)"
│  └─ value = 1.5
└─ Результат: ВЫИГРЫШ
```

---

## Полная таблица всех типов

| Тип | Условие | scope | aggregation | Оператор | Значение |
|-----|---------|-------|-------------|----------|----------|
| **П1** | outcome = 1 | both | auto | eq | outcomeValue: 1 |
| **Х** | outcome = 0 | both | auto | eq | outcomeValue: 0 |
| **П2** | outcome = 2 | both | auto | eq | outcomeValue: 2 |
| **ТБ 2.5** | home + away > 2.5 | both | sum | gt | 2.5 |
| **ТМ 2.5** | home + away < 2.5 | both | sum | lt | 2.5 |
| **1Х** | outcome ∈ [1, 0] | both | auto | in | set: [1, 0] |
| **12** | outcome ∈ [1, 2] | both | auto | in | set: [1, 2] |
| **Х2** | outcome ∈ [0, 2] | both | auto | in | set: [0, 2] |
| **ИТБ(1) 1.5** | home > 1.5 | home | direct | gt | 1.5 |
| **ИТБ(2) 0.5** | away > 0.5 | away | direct | gt | 0.5 |
| **ИТМ(1) 1.5** | home < 1.5 | home | direct | lt | 1.5 |
| **ИТМ(2) 1.5** | away < 1.5 | away | direct | lt | 1.5 |

---

## Как выбрать правильные параметры?

### Шаг 1: Определить тип прогноза

```
Вопрос: Что я прогнозирую?

├─ Кто выигрывает? → П1, Х, П2
├─ Сколько всего голов? → ТБ, ТМ
├─ Кто выигрывает или ничья? → 1Х, 12, Х2
└─ Сколько голов у одной команды? → ИТБ(1), ИТБ(2), ИТМ(1), ИТМ(2)
```

### Шаг 2: Выбрать параметры

```
Если П1/Х/П2:
├─ scope = не важно (игнорируется)
├─ aggregation = не важно (игнорируется)
├─ comparisonOperator = "Равно (=)"
└─ outcomeValue = 1/0/2

Если ТБ/ТМ:
├─ scope = "both" (обе команды)
├─ aggregation = "sum" (сумма)
├─ comparisonOperator = "Больше (>)" или "Меньше (<)"
└─ value = 2.5, 3.5 и т.д.

Если 1Х/12/Х2:
├─ scope = не важно
├─ aggregation = не важно
├─ comparisonOperator = "Принадлежность множеству (in)"
└─ set = [1, 0] или [1, 2] или [0, 2]

Если ИТБ(1)/ИТБ(2)/ИТМ(1)/ИТМ(2):
├─ scope = "home" или "away"
├─ aggregation = "direct"
├─ comparisonOperator = "Больше (>)" или "Меньше (<)"
└─ value = 0.5, 1.5, 2.5 и т.д.
```

---

## Итог

### Для П1 нужно запомнить:

```
┌──────────────────────────────────────────┐
│ П1 = Первая команда выигрывает           │
│                                          │
│ В админке:                               │
│ ├─ name = "П1"                           │
│ ├─ comparisonOperator = "Равно (=)"      │
│ └─ outcomeValue = 1                      │
│                                          │
│ Система проверяет:                       │
│ └─ outcome = 1? → Прогноз верный!        │
└──────────────────────────────────────────┘
```

### Три исхода = три кода:

```
П1 (код 1) → homeScore > awayScore
Х  (код 0) → homeScore = awayScore
П2 (код 2) → homeScore < awayScore
```

### Все типы прогнозов:

```
Основные исходы:  П1, Х, П2
Общие тоталы:     ТБ, ТМ
Двойной шанс:     1Х, 12, Х2
Индивидуальные:   ИТБ(1), ИТБ(2), ИТМ(1), ИТМ(2)
```

**Суть:** Каждый тип прогноза использует разные параметры, но логика одна — система сравнивает реальный результат с прогнозом и определяет, выигрыш это или проигрыш!
