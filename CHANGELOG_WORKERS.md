# üìù Changelog: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–æ—Ä–∫–µ—Ä–æ–≤ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## –î–∞—Ç–∞: 17.12.2024

### ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω –≤–æ—Ä–∫–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 10 –º–∏–Ω—É—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –º–∞—Ç—á–∏

#### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Docker –¥–ª—è –≤–æ—Ä–∫–µ—Ä–æ–≤
- –°–æ–∑–¥–∞–Ω –ª–µ–≥–∫–∏–π `Dockerfile.worker` —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–æ—Ä–∫–µ—Ä–æ–≤
- –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ —Å–æ–∫—Ä–∞—â–µ–Ω–æ —Å 10-15 –º–∏–Ω—É—Ç –¥–æ 2-3 –º–∏–Ω—É—Ç
- –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ —É–º–µ–Ω—å—à–µ–Ω —Å ~500MB –¥–æ ~200MB
- –î–æ–±–∞–≤–ª–µ–Ω `.dockerignore` –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### üì¶ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

#### Docker
- `Dockerfile.worker` - –ª–µ–≥–∫–∏–π –æ–±—Ä–∞–∑ –¥–ª—è –≤–æ—Ä–∫–µ—Ä–æ–≤
- `.dockerignore` - ÔøΩÔøΩ—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–±–æ—Ä–∫–∏
- `docker-compose.prediction-stats.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `PREDICTION_STATS_DOCKER.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞—Å—á–µ—Ç—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `DOCKER_OPTIMIZATION.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Docker
- `QUICK_START_WORKERS.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤
- `WORKERS_SUMMARY.md` - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –≤—Å–µ–º –≤–æ—Ä–∫–µ—Ä–∞–º
- `CHANGELOG_WORKERS.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

### üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö

#### package.json
```json
{
  "scripts": {
    "predictions:stats:calc:loop": "tsx scripts/prediction-stats/calculate-all.mjs --loop --interval=600000"
  }
}
```

#### scripts/prediction-stats/calculate-all.mjs
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `--loop` —Ä–µ–∂–∏–º–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `--interval` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- –í–æ—Ä–∫–µ—Ä –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º

#### docker-compose —Ñ–∞–π–ª—ã
–í—Å–µ –≤–æ—Ä–∫–µ—Ä—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `Dockerfile.worker`:
- `docker-compose.matches-import-forward.yml`
- `docker-compose.matches-import-backward.yml`
- `docker-compose.prediction-stats.yml`

#### WORKERS.md
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ—Ä–∫–µ—Ä–µ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –ó–∞–ø—É—Å–∫ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
```bash
# –ò–º–ø–æ—Ä—Ç –º–∞—Ç—á–µ–π
docker compose -f docker-compose.matches-import-forward.yml up -d

# –†–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
docker compose -f docker-compose.prediction-stats.yml up -d
```

#### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç
pnpm run predictions:stats:calc

# –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
pnpm run predictions:stats:calc:loop
```

### üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏: ~10-15 –º–∏–Ω—É—Ç
- –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: 423MB+
- –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞: ~500MB
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ø–æ–ª–Ω—ã–π `Dockerfile` —Å Next.js

#### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏: ~2-3 –º–∏–Ω—É—Ç—ã
- –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: ~50MB
- –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞: ~200MB
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–µ–≥–∫–∏–π `Dockerfile.worker`

### üîç –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

#### –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ –ø—Ä–æ–¥–µ –∫–æ–ª–ª–µ–∫—Ü–∏—è `predictionStats` –±—ã–ª–∞ –ø—É—Å—Ç–∞—è, –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. –ù–µ –±—ã–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
2. –†–∞—Å—á–µ—Ç –Ω—É–∂–Ω–æ –±—ã–ª–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é
3. –ù–µ –±—ã–ª–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∏–º–ø–æ—Ä—Ç–æ–º –º–∞—Ç—á–µ–π

#### –†–µ—à–µ–Ω–∏–µ
1. –°–æ–∑–¥–∞–Ω –≤–æ—Ä–∫–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
2. –î–æ–±–∞–≤–ª–µ–Ω loop —Ä–µ–∂–∏–º –≤ —Å–∫—Ä–∏–ø—Ç
3. –í–æ—Ä–∫–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Docker Compose
4. –†–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –∏–º–ø–æ—Ä—Ç–æ–º –º–∞—Ç—á–µ–π

### üìù –ú–∏–≥—Ä–∞—Ü–∏—è

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –∑–∞–ø—É—â–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –≤–æ—Ä–∫–µ—Ä—ã:

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –≤–æ—Ä–∫–µ—Ä—ã
docker compose -f docker-compose.matches-import-forward.yml down

# 2. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å –Ω–æ–≤—ã–º Dockerfile
docker compose -f docker-compose.matches-import-forward.yml build

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
docker compose -f docker-compose.matches-import-forward.yml up -d

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
docker compose -f docker-compose.prediction-stats.yml up -d
```

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã –≤–æ—Ä–∫–µ—Ä–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –Ω–∞ –æ—à–∏–±–∫–∏
3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö:
- `WORKERS.md` - –æ–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤–æ—Ä–∫–µ—Ä–∞–º
- `PREDICTION_STATS_DOCKER.md` - —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `DOCKER_OPTIMIZATION.md` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Docker
- `QUICK_START_WORKERS.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `WORKERS_SUMMARY.md` - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

### üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–ù–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –æ–±–∞ –≤–æ—Ä–∫–µ—Ä–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–∏–º–ø–æ—Ä—Ç + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
2. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞
3. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –ë–î
4. –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ —É–≤–µ–ª–∏—á—å—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª

### üë• –ê–≤—Ç–æ—Ä—ã

- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Docker –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
