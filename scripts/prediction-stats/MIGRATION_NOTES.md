# üìù –ó–∞–º–µ—Ç–∫–∏ –æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤

## –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ –ø–∞–ø–∫–µ `scripts/prediction-stats/` –±—ã–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `@esbuild-kit/esm-loader` –≤–º–µ—Å—Ç–æ –ø–æ–ø—ã—Ç–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–∞–ø–∫–∏ `dist/`.

### –ü—Ä–æ–±–ª–µ–º–∞

–ò—Å—Ö–æ–¥–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—ã—Ç–∞–ª–∏—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å TypeScript —Ñ–∞–π–ª—ã –∏–∑ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–ø–∫–∏ `dist/`:

```javascript
import config from '../../dist/payload.config.js'
import { calculatePredictionStats, savePredictionStats } from '../../dist/lib/prediction-stats-calculator.js'
```

–û–¥–Ω–∞–∫–æ Next.js –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç TypeScript —Ñ–∞–π–ª—ã –≤ `dist/`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ:
```
Error [ERR_MODULE_NOT_FOUND]: Cannot find module '/Users/ko/payload-starter/dist/payload.config.js'
```

### –†–µ—à–µ–Ω–∏–µ

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç TypeScript —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `@esbuild-kit/esm-loader`:

```javascript
import dotenv from 'dotenv'
import path from 'node:path'
import { fileURLToPath } from 'node:url'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)

// –ó–∞–≥—Ä—É–∑–∫–∞ env
const envCandidates = [
  path.resolve(process.cwd(), '.env'),
  path.resolve(process.cwd(), '.env.local'),
  // ... –∏ —Ç.–¥.
]
for (const p of envCandidates) {
  dotenv.config({ path: p })
}

// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç TypeScript
const { default: config } = await import('../../src/payload.config.ts')
```

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

1. ‚úÖ `calculate-all.mjs` - –ú–∞—Å—Å–æ–≤—ã–π –ø–æ–¥—Å—á—ë—Ç
2. ‚úÖ `recalculate-all.mjs` - –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç
3. ‚úÖ `calculate-by-post.mjs` - –ü–æ –ø—Ä–æ–≥–Ω–æ–∑—É
4. ‚úÖ `calculate-by-user.mjs` - –ü–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
5. ‚úÖ `calculate-by-match.mjs` - –ü–æ –º–∞—Ç—á—É

## –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É—é—Ç —Ñ–ª–∞–≥–∞ `--loader`:

```bash
# –í–º–µ—Å—Ç–æ:
node scripts/prediction-stats/calculate-all.mjs

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
node --loader @esbuild-kit/esm-loader scripts/prediction-stats/calculate-all.mjs
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–±–æ—Ä–∫–∞ TypeScript (`npm run build`)
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏ TypeScript —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ `.env`
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `import-leagues.mjs`)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

```bash
$ node --loader @esbuild-kit/esm-loader scripts/prediction-stats/calculate-all.mjs

üöÄ –ó–∞–ø—É—Å–∫ –º–∞—Å—Å–æ–≤–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤...
üìä –ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤: 1
‚è≠Ô∏è  –ü—Ä–æ–ø—É—Å–∫ 6941805dbf951662b3afabaa - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

==================================================
üìà –ò–¢–û–ì–ò:
==================================================
–í—Å–µ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤: 1
–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 0
–°–æ–∑–¥–∞–Ω–æ –Ω–æ–≤—ã—Ö: 0
–û–±–Ω–æ–≤–ª–µ–Ω–æ: 0
–ü—Ä–æ–ø—É—â–µ–Ω–æ: 1
–û—à–∏–±–æ–∫: 0
==================================================
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `README.md` —Å:
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ –∑–∞–ø—É—Å–∫–∞ –¥–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- –ü—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (cron, PM2)
- FAQ —Å —Ä–µ—à–µ–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è README.md

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–≠—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å:
- Node.js 18.20.2+
- Payload CMS 3.51.0
- @esbuild-kit/esm-loader (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ)

## –î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

–î–µ–∫–∞–±—Ä—å 2024
