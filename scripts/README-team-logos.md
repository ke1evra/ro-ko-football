# Скрипт загрузки логотипов команд

Этот скрипт загружает все логотипы команд из LiveScore API и сохраняет их локально.

## Особенности

- **Постраничная загрузка**: Обрабатывает все ~8348 команд по 100 команд за раз
- **Возобновление работы**: Можно прервать и продолжить с места остановки
- **Логгирование**: Подробные логи процесса загрузки
- **Автоматическое создание папок**: Создает все необходимые директории
- **Обработка ошибок**: Пропускает недоступные логотипы и продолжает работу

## Использование

### Тестовая загрузка (5 команд)
```bash
node scripts/test-download-logos.cjs
```

### Полная загрузка всех команд
```bash
node scripts/download-team-logos.cjs
```

## Структура файлов

```
public/
  team-logos/           # Папка с загруженными логотипами
    6718.png           # Логотип команды с ID 6718
    2331.png           # Логотип команды с ID 2331
    ...

logs/
  team-logos-download.log      # Подробный лог процесса
  team-logos-progress.json     # Файл прогресса для возобновления
```

## Конфигурация

В файле `download-team-logos.cjs` можно настроить:

- `PAGE_SIZE`: Количество команд на страницу (по умолчанию 100)
- `DELAY_BETWEEN_REQUESTS`: Задержка между запросами к API (1000мс)
- `DELAY_BETWEEN_DOWNLOADS`: Задержка между загрузками логотипов (500мс)
- `LOGOS_DIR`: Папка для сохранения логотипов

## Прерывание и возобновление

Скрипт можно безопасно прервать (Ctrl+C) и запустить снова - он продолжит с места остановки.

Прогресс сохраняется в файле `logs/team-logos-progress.json`:

```json
{
  "currentPage": 15,
  "totalPages": 84,
  "totalTeams": 1423,
  "downloadedLogos": 1398,
  "skippedLogos": 25,
  "failedLogos": 0,
  "processedTeams": [6718, 2333, ...]
}
```

## Статистика

После завершения скрипт выводит статистику:

```
=== Загрузка завершена ===
Итого обработано команд: 8348
Логотипов загружено: 7892
Логотипов пропущено: 456
Ошибок загрузки: 0
```

## Использование в коде

После загрузки логотипы можно использовать в компонентах:

```typescript
// Функция для получения URL логотипа команды
function getTeamLogoUrl(teamId: number): string {
  return `/team-logos/${teamId}.png`
}

// В React компоненте
<Image 
  src={getTeamLogoUrl(teamId)} 
  alt={`Логотип ${teamName}`}
  width={24} 
  height={24}
  onError={(e) => {
    // Fallback если логотип не найден
    e.currentTarget.src = '/team-logos/default.png'
  }}
/>
```

## Примечания

- Логотипы сохраняются в формате PNG
- Размер файлов варьируется от 10KB до 50KB
- Общий размер всех логотипов: ~200-300MB
- Время полной загрузки: ~2-3 часа (с учетом задержек)

## Troubleshooting

### Ошибка "ENOENT: no such file or directory"
Скрипт автоматически создает все необходимые папки. Если ошибка повторяется, проверьте права доступа.

### Ошибка "HTTP 404" для логотипов
Некоторые команды могут не иметь логотипов в API. Это нормально, скрипт пропустит их и продолжит работу.

### Медленная загрузка
Можно уменьшить задержки в конфигурации, но будьте осторожны с нагрузкой на API.